<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');function isLoggedIn() {	$CI = & get_instance();	if (!$CI->session->is_logged_in) {		return false;	}	return true;}function requireLogin() {	if (!isLoggedIn()) {		redirect('/login');		return;	}}function activeUser() {	$CI = & get_instance();	return $CI->session->activeUser;}function platform() {	$CI = & get_instance();	return $CI->session->platform;}function enableProfiler() {	$CI = & get_instance();	if ($_SERVER['REMOTE_ADDR'] == '90.191.68.181' || $_SERVER['REMOTE_ADDR'] == '2001:7d0:828b:2201:9c74:4586:9bdf:561a') {		$CI->output->enable_profiler(TRUE);	}}function formatDate($date) {	return date('j F, Y', strtotime($date));}function resizeImage($path, $fileName, $fileSize) {	$CI = & get_instance();	$dimFolder = $fileSize . 'x' . $fileSize . '/';	$CI->load->library('image_lib');	$config['image_library'] = 'gd2';	$config['source_image'] = $path . $fileName;	$config['new_image'] = $path . $dimFolder . $fileName;	$config['create_thumb'] = TRUE;	$config['maintain_ratio'] = TRUE;	$config['thumb_marker'] = '';	$config['width'] = $fileSize;	$config['height'] = $fileSize;	$config['x_axis'] = $fileSize;	$config['y_axis'] = $fileSize;	$CI->image_lib->initialize($config);	if (!$CI->image_lib->resize()) {		echo $CI->image_lib->display_errors();		$CI->image_lib->clear();		return;	}	$CI->image_lib->clear();}function rotateImageFromMobileDevice($file) {	$exif = exif_read_data($file);	if (!empty($exif['Orientation'])) {		$curRotation = $exif['Orientation'];		if (isset($curRotation) && $curRotation != 1) {			$CI = & get_instance();			$CI->load->library('image_lib');			switch ($curRotation) {				case 6: {					$rotation = 270;					break;				}				case 3: {					$rotation = 180;					break;				}				case 8: {					$rotation = 90;					break;				}				default: {					$rotation = 0;					break;				}			}			$config['image_library'] = 'gd2';			$config['library_path'] = '/usr/bin/';			$config['source_image'] = $file;			$config['rotation_angle'] = $rotation;			$CI->image_lib->initialize($config);			if (!$CI->image_lib->rotate()) {				echo $CI->image_lib->display_errors();			}		}	}}